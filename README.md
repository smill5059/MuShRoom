

<h1 align=center>A105 - MuShRoom</h1>

<div align=center>
    <img src="https://img.shields.io/badge/platform-web-green">
    <img src="https://img.shields.io/badge/framwork-Vue-42b883">
    <img src="https://img.shields.io/badge/framework-spring boot-blue">
    <img src="https://img.shields.io/badge/database-MongoDB-9cf">
    <img src="https://img.shields.io/badge/server-AWS-yellow">
    <img src="https://img.shields.io/badge/language-java%2C javascript-yellowgreen">
    <img src="https://img.shields.io/badge/swagger-valid-brightgreen">
</div>
<img src="images/page_main.png" align=center>

<h3 align=center><a href="document/DEMO.md">DEMO ë°”ë¡œê°€ê¸°</a></h3>
<h3 align=center><a href="https://youtu.be/tgc0P9LF5UU">UCC ë°”ë¡œê°€ê¸°</a></h3>

<div align=center>
  	Musician ë§í¬ì—ì„œ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ê³¼ í•¨ê»˜ ë‹¤ì–‘í•œ ë©œë¡œë””ë¥¼ ì¶”ê°€í•˜ê³ , ì´í™íŠ¸ë¥¼ ì£¼ì–´ ì™„ì„±ë„ ë†’ì€ ìŒì•…ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
    ì‹¤ì‹œê°„ ì±„íŒ…ìœ¼ë¡œ ì˜ê²¬ì„ ê³µìœ í•˜ê³  ì™„ì„±ëœ ê²°ê³¼ë¬¼ì€ Audience ë§í¬ë¡œ ê³µìœ í•´ ì‚¬ëŒë“¤ì—ê²Œ ë“¤ë ¤ì£¼ë©´ì„œ,<br>
    ìŒì•…ìœ¼ë¡œ í•˜ë‚˜ë˜ëŠ” ìˆœê°„ì„ ê²½í—˜í•´ë³´ì„¸ìš”
</div>


## :book: ëª©ì°¨

### ğŸ¶ [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)

### :gear: [ìŒì•… ê³µìœ  ì¤€ë¹„ ê³¼ì •](#ìŒì•…-ê³µìœ -ì¤€ë¹„-ê³¼ì •)

- ì‹œìŠ¤í…œ êµ¬ì„±ë„
- ì™€ì´ì–´í”„ë ˆì„

### :package: [ìŒì•… ê³µìœ  ìˆ˜ë‹¨](#ìŒì•…-ê³µìœ -ìˆ˜ë‹¨)â€‹

* Frontend / Backendì˜ ì‚¬ìš© Package
* ì½”ë“œ ì‹¤í–‰ ë°©ë²•

### ğŸ»ğŸ¸ğŸ¥ğŸ“¯ğŸ¹ [í¬ë£¨ì› ì†Œê°œ](#í¬ë£¨ì›-ì†Œê°œ)





## í”„ë¡œì íŠ¸ ì†Œê°œ

> **Music Share Room**
>
> ëª¸ì€ ë–¨ì–´ì ¸ ìˆì–´ë„ ìŒì•…ìœ¼ë¡œ í•˜ë‚˜ë˜ëŠ” ìš°ë¦¬

ì½”ë¡œë‚˜ë¡œ ì¸í•œ ë¹„ëŒ€ë©´ ìƒí™©ì—ì„œë„

ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ì–‘í•œ ë©œë¡œë””ë¥¼ ìŒ“ì•„ì„œ

ì™„ì„±ë„ ë†’ì€ ìŒì•…ì„ ë§Œë“¤ê³ , ê³µìœ í•´ë³´ì„¸ìš”!




## ìŒì•… ê³µìœ  ì¤€ë¹„ ê³¼ì •
### ì‹œìŠ¤í…œ êµ¬ì„±ë„

![structure](images/structure.png)



### ì™€ì´ì–´í”„ë ˆì„

![wireframe_main](images/wireframe_main.jpg)
![wireframe_room](images/wireframe_room.jpg)
![wireframe_room_detail](images/wireframe_room_detail.jpg)





## ìŒì•… ê³µìœ  ìˆ˜ë‹¨

### Frontend êµ¬ì„± ìš”ì†Œ

|    Vue ë¼ì´ë¸ŒëŸ¬ë¦¬   | Version | Comment                                              |
| :-----------------: | :-----: | :--------------------------------------------------- |
|       axios         | 0.21.1  | ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° ìœ„í•´ ì‚¬ìš©                       |
|    vue-router       | 3.5.1   | ìš”ì²­ URLì— ë”°ë¼ ë¸Œë¼ìš°ì €ì—ì„œ ë”ì„ ë³€ê²½               |
|        vuex         | 3.6.2   | ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©                                |
|    sockjs-client    | 1.5.0   | ì†Œì¼“ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬                      |
|   webstomp-client   | 1.2.6   | ì†Œì¼“ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬                      |
|         tone        | 14.7.77 | ìŒì•…ì„ ì¬ìƒ/í¸ì§‘í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬                 |
|     vue-cookies     | 1.7.4   | ì ‘ì† ê¸°ë¡ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬                 |
| vue-toastification  | 1.7.11  | ì¶”ê°€, ìˆ˜ì •, ì‚­ì œ ë“±ì˜ ì•Œë¦¼ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬         |
|        vuetify      | 2.4.3   | UI êµ¬ì„±ì„ ìœ„í•´ ì‚¬ìš©                                  |
|   vue-wave-surfer   | 1.0.1   | íŒŒí˜•ì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬                      |

### Backend êµ¬ì„± ìš”ì†Œ

|   ê¸°ìˆ  ìŠ¤íƒ    |   Version   | Comment                                    |
| :------------: | :---------: | :----------------------------------------- |
|    OpenJDK     |      11     | Java                                       |
|   SpringBoot   |    2.4.2    | Rest API ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ              |
|     Maven      |    4.0.0    | í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê´€ë¦¬ ë„êµ¬ |
|    MongoDB     |    4.4.3    | DB                                         |
|      JPA       |    2.1.2    | ì„œë²„ì™€ DBì˜ ì—°ë™ì„ ìœ„í•´ ì‚¬ìš©               |
|     Ubuntu     | 20.04.2 LTS | ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ë¦¬ëˆ…ìŠ¤ ì„œë²„ êµ¬ì¶•        |
|     Docker     |   20.10.2   | ì»¨í…Œì´ë„ˆí™” ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ ê´€ë¦¬            |
|     Nginx      |   1.19.6    | Vue í´ë¼ì´ì–¸íŠ¸ ì›¹ ì„œë²„ ì‚¬ìš©                |

|  Spring ë¼ì´ë¸ŒëŸ¬ë¦¬  |  Version   | Comment                      |
| :-----------------: | :--------: | :--------------------------- |
|     Spring Web      |     -      |      Rest API ì„œë²„ êµ¬ì¶•      |
|     WebSocket       |     -      |       ì†Œì¼“ ì„œë²„ êµ¬ì¶•         |
| Spring Data MongoDB |     -      |        MongoDB ì—°ê²°          |
|   Spring Data JPA   |     -      |      DBì™€ì˜ ì—°ê²° ê´€ë¦¬        |
|       Lombok        |     -      | Getter, Setter ë“± ë¹ ë¥¸ êµ¬í˜„  |



## ì½”ë“œ ì‹¤í–‰ ë°©ë²•
### ì„ í–‰ ì‘ì—…
- í”„ë¡œì íŠ¸ëŠ” Java 11 ë²„ì „ì—ì„œ í…ŒìŠ¤íŠ¸ ì§„í–‰
- Node.js / NPM ì„¤ì¹˜
- Docker ì„¤ì¹˜
- Clone Repository
```bash
git clone https://lab.ssafy.com/s04-webmobile1-sub3/s04p13a105.git
cd s04p13a105
```

### ì„¤ì¹˜
- Docker ë„¤íŠ¸ì›Œí¬ ìƒì„±
```bash
docker network create my-net
```
Dockerì˜ defalt bridgeëŠ” ì»¨í…Œì´ë„ˆê°„ ìë™ DNS resolutionì„ ì œê³µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—,  
Custom bridgeë¥¼ ìƒì„±í•œë‹¤.  
  
- ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì¹˜, ì‹¤í–‰
```bash
docker run --name mongo-db -d --network my-net mongo
```
í•„ìš”í•  ê²½ìš° /data/db ê²½ë¡œ(ì‹¤ì œ ë°ì´í„° ì €ì¥ ê²½ë¡œ)ë¥¼ ì™¸ë¶€ ê²½ë¡œì— ë°”ì¸ë”©í•œë‹¤.
  
- í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì • íŒŒì¼ ìƒì„±
```javascript
// frontend/src/store/Config.js
class Config {
    static ServerURL = "http://localhost:8080" // Backend Server URL
    static HostURL = "http://localhost" // Shareì—ì„œ ë³´ì—¬ì£¼ëŠ” URL 
}

export default Config
```
  
- í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
```bash
cd s04p13a105/frontend
  
npm run build
```

- Nginx ì‹¤í–‰ (frontend)
```
docker run -p 80:80 -p 443:443 --network my-net -v /<Vue dist ë””ë ‰í† ë¦¬>:/home -v /etc/letsencrypt/:/etc/letsencrypt/ --name frontend nginx/frontend
```
ìœ„ì˜ ì˜ˆì‹œëŠ” SSL ì„¤ì •ì´ ë˜ì–´ìˆëŠ” nginx.conf íŒŒì¼ì„ í•„ìš”ë¡œ í•œë‹¤.  
í•„ìš”í•  ê²½ìš° nginx.conf íŒŒì¼ ìˆ˜ì •í•˜ì—¬ Dockerfile ìƒì„±  
  
- nginx.conf ì˜ˆì‹œ
```
user       nginx;  ## Default: nobody
worker_processes  auto;  ## Default: 1
pid        /var/run/nginx.pid;
worker_rlimit_nofile 8192;

events {
  worker_connections  4096;  ## Default: 1024
}

http {
  include    /etc/nginx/mime.types;
  include    /etc/nginx/proxy.conf;
  include    /etc/nginx/fastcgi.conf;

  default_type application/octet-stream;
  access_log   /var/log/nginx/access.log;
  error_log  /var/log/nginx/error.log;
  sendfile     on;
  tcp_nopush   on;

  server {
    listen       80;
    server_name  musicshareroom.tk www.musicshareroom.tk;
    root         /home;
    index        index.html;

    location / {
      return 301 https://$server_name$request_uri;
    }
  }

  server {
    listen       80;
    server_name  i4a105.p.ssafy.io;

    location / {
      return 301 $scheme://musicshareroom.tk$request_uri;
    }
  }

  server {
    listen       443 ssl;
    server_name  musicshareroom.tk www.musicshareroom.tk;
    root         /home;
    index        index.html;

    ssl_certificate /etc/letsencrypt/live/musicshareroom.tk/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/musicshareroom.tk/privkey.pem;

    location / {
      try_files $uri $uri/ /index.html;
    }

    location /api/ {
        proxy_pass http://backend:8080/;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        add_header 'Access-Control-Allow-Origin' '*';
    }
  }
}
```

- ë°±ì—”ë“œ Dockerfile ì‘ì„±
```
FROM openjdk:11
EXPOSE 8080
WORKDIR /home
ADD application.jar . 
# VOLUME /home # í™ˆ ê²½ë¡œì—ìˆëŠ” application.jarë¥¼ ì‹¤í–‰í•œë‹¤.
ENTRYPOINT ["java", "-jar", "application.jar"]
```

- ë°±ì—”ë“œ ë¹Œë“œ, ì‹¤í–‰
```bash
cd s04p13a105/backend
  
./mvnw package
  
cp target/*.jar <Dockerfile ê²½ë¡œ>/application.jar
cd <Dockerfile ê²½ë¡œ>
  
docker build -t spring/backend .
docker run --network my-net -v <íŠ¹ì • ê²½ë¡œ>/files/:/home/files/  --name backend spring/backend
```
ì»¨í…Œì´ë„ˆì˜ /home/files ê²½ë¡œì—ëŠ” ì‹¤ì œ ìŒì•… íŒŒì¼ì´ ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ë³¼ë¥¨ì„ ë°”ì¸ë“œí•œë‹¤.  

## í¬ë£¨ì› ì†Œê°œ

### ğŸ»ğŸ¸ğŸ¥ğŸ“¯ğŸ¹ ë¸Œë ˆë©˜ ìŒì•…ëŒ€ íŒ€

* **ì •ìˆ˜ë¦¼** - *PM, backend*- [smill5059](https://lab.ssafy.com/smill5059)
* **ê¶Œì—°ìš±** - *frontend* - [w00k0805](https://lab.ssafy.com/w00k0805)
* **ì†¡ê±´í˜¸** - *frontend* - [gunho817](https://lab.ssafy.com/gunho817)
* **ì´ê±´ìš°** - *frontend* - [geonwoo0223](https://lab.ssafy.com/geonwoo0223)
* **ì´ë³‘í¬** - *backend* - [milk1543](https://lab.ssafy.com/milk1543)
* **ì •ì§€í™˜** - *backend* - [lee33843](https://lab.ssafy.com/kkiu1756)



### :star: Git Branch ì „ëµ

### branch

```bash
(master) -> (develop) -> (feature/frontend(backend)/featureëª…)
```

* master : ë°°í¬ ê°€ëŠ¥í•œ ìƒíƒœë¡œ ìœ ì§€
* develop : ê°œë°œìš© ìµœìƒìœ„ branch
* fetaure : ê¸°ëŠ¥ë³„ branch

### commit

```bash
Commit ë©”ì‹œì§€ëŠ” í–‰ìœ„: ì„¤ëª…, ë‚´ìš©ì€ íŒŒì¼ëª…: ìƒì„¸ ì‘ì—… ë‚´ìš©ìœ¼ë¡œ êµ¬ì„±
    ì˜ˆì‹œ]
        Modify : MusicBoard.vue
        - frontend/src/components/MusicBoard.vue : ì¬ìƒ ë²„íŠ¼ ìˆ˜ì •
        Feat : README.md
```

### merge

```bash
merge í•˜ê¸° ì „ì— í˜„ì¬ ì‘ì—… ì§„í–‰ ìƒí™© ê³µìœ 
merge ê¶Œí•œì€ ëª¨ë‘ê°€ ê°€ì§€ê³  ìˆì§€ë§Œ ê°™ì€ íŒ€ì˜ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë¦¬ë·° ì‹ ì²­ í›„ merge í•˜ê¸°
merge í›„ ë¶ˆí•„ìš”í•œ branch ì§€ìš°ê¸°
```